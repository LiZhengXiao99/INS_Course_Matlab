% -------------------------------------------------------------------------
% 实现单组数据的 IMU 量测值校正
%   - 利用陀螺仪和加速度计的误差矩阵 Mg、Ma，和零偏向量 Ba、Bg； 
%   - 量测值先减零偏，再左乘误差矩阵的逆;
% 作者|创建日期|修改日期：     李郑骁 | 6/7/2024 | 6/7/2024          
% -------------------------------------------------------------------------
function cab_imu = calibrate_imu(raw_imu, Ba, Bg, Mg, Ma)
    cab_imu(1) = raw_imu(1);
    cab_imu(2:4) =  Mg \ (raw_imu(2:4)' - Ba'); 
    cab_imu(5:7) =  Ma \ (raw_imu(5:7)' - Bg'); 
end